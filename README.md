# TroubleShooting 
- 더보기를 누르면 TroubleShooting 관련 상세보기 입니다.

1. 로그인/세션 유지 불안정

- 새로고침/페이지 이동 시 로그인 상태가 풀리거나 401 간헐적 발생.

- AuthContext(프론트 상태)와 Session(서버 인증)이 분리된 상태에서 쿠키 credentials 설정이 빠져 동기화 실패

- 서버 세션을 단일 기준(SSOT)으로 설계해야 인증이 안정화된다는 것을 배웠다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

새로고침/라우팅 이동 후 “로그인 필요” 반복, 간헐적으로 401 발생

- ## 원인(핵심)

프론트(AuthContext)와 서버(Session) 인증 기준 분리 + 쿠키 세션인데 withCredentials/allowCredentials 누락

- ## 해결(핵심 조치)

프론트: 앱 시작 시 세션 확인 API 호출 → AuthContext 상태 재구성

서버: 인터셉터는 세션 유무로 인증 판단 통일

CORS: allowCredentials=true + 허용 origin 명시, 프론트 요청 withCredentials 적용

- ## 검증/결과

새로고침/다중 탭/라우팅 이동에서도 로그인 상태 유지 확인

- ## 조치(재발 방지)

인증 플로우 문서화 + “새로고침/이동” 시나리오를 고정 테스트로 추가

</details>
<br>
<br>



2. DOCX 템플릿 플레이스홀더 치환 누락/깨짐

- DOCX 자동 생성 시 플레이스홀더가 가끔 안 바뀌거나 문장이 끊겨 출력.

- DOCX 텍스트가 run 단위로 분할 저장되어 단순 문자열 replace가 실패

- 코드뿐 아니라 템플릿 작성 규칙까지 표준화해야 재현 가능한 산출물이 된다는 걸 배웠다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

플레이스홀더 일부 미치환, 문장 중간 끊김

- ## 원인(핵심)

${NAME} 같은 문자열이 run으로 쪼개져 저장되면 문자열 치환이 깨짐

- ## 해결(핵심 조치)

docx4j 변수 치환 방식으로 전환

템플릿 작성 규칙 적용(플레이스홀더 run 분할 방지)

대표 템플릿 기준 회귀 테스트 추가

- ## 검증/결과

반복 생성 시 치환 누락 재현되지 않음

- ## 조치(재발 방지)

템플릿 제작 가이드(금지/권장 패턴) 문서화
 - ex 작성요령 추가 

</details>
<br>
<br>



3. LLM 응답 JSON 파싱 실패/스키마 불일치

- LLM 요약 결과를 JSON으로 저장하려 했지만 출력이 깨져 파싱/저장이 실패.

- LLM은 “JSON처럼 보이는 텍스트”를 출력할 수 있어 스키마가 흔들림.

- 생성형 결과는 프롬프트와 서버 방어 로직을 같이 설계해야 운영 가능하다는 걸 체감했다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

JSON 파싱 오류(따옴표/쉼표/필드 누락), 필드명 변동으로 후처리 실패

- ## 원인(핵심)

LLM 출력은 엄격한 JSON을 항상 보장하지 않음(프롬프트가 느슨하면 형식 흔들림)

- ## 해결(핵심 조치)

프롬프트: “JSON only + 키 목록 고정 + 예시 제공”으로 강화

서버: 기본값/누락 허용 등 방어 파싱으로 실패 흡수

실패 시 폴백 저장/표시 경로 마련

- ## 검증/결과

파싱 실패로 기능이 멈추는 케이스 감소(실패를 흡수하고 지속 동작)

- ## 조치(재발 방지)

원문/오류 유형 로그로 프롬프트/스키마 개선 루프 구축

</details>
<br>
<br>



4. AI 연동 품질/안정성 이슈로 모델 교체(Ollama → OpenAI)

- 로컬 모델 기반 요약은 품질 편차와 지연/실패가 있어 사용자 경험이 불안정함.

- 서비스 기준에선 “가끔 잘 됨”이 아니라 “항상 비슷한 품질”이 필요.

- 요구 품질을 기준으로 모델/서빙을 선택하는 트레이드오프 판단을 배웠다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

요약 품질 편차, 응답 지연/실패

-## 원인(핵심)

모델 성능/서빙 환경/프롬프트 최적화 난이도 차이로 일관성 확보가 어려움

- ## 해결(핵심 조치)

Spring AI 기반으로 연동 구조 정리

OpenAI로 전환 + 프롬프트/후처리 개선

타임아웃/재시도/에러 메시지 표준화

- ## 검증/결과

응답 안정성 및 결과 품질 편차 감소

- ## 조치(재발 방지)

최소 스키마 검증(필수 필드) + 실패 시 사용자 안내 일관화

</details>
<br>
<br>



5. Ant Design + Tailwind 스타일 충돌

- Antd 컴포넌트 스타일이 페이지마다 깨지거나 전역 스타일에 오염되는 문제.

- Tailwind reset(preflight)과 CSS import 순서/우선순위가 충돌이 원인.

- UI는 라이브러리 혼용 자체보다 ‘스타일 정책(룰)’을 먼저 세워야 유지보수된다는 걸 배웠다.

<details> <summary><b> 더보기</b></summary>

- ##증상

버튼/모달 등 스타일이 랜덤하게 깨짐, 페이지마다 일관성 없음

- ## 원인(핵심)

reset(preflight) + 전역 우선순위 + CSS import 순서 충돌

- ## 해결(핵심 조치)

CSS 로딩 순서 정리(라이브러리 CSS → 커스텀 → Tailwind 적용 정책)

Antd(컴포넌트) / Tailwind(레이아웃·간격) 역할 분리

- ## 검증/결과

공통 컴포넌트 스타일이 페이지 전반에서 일관되게 유지

- ## 조치(재발 방지)

스타일 규칙 문서화 + 주요 화면 시각 회귀 체크

</details>
<br>
<br>



6. Tika 파일 처리/다운로드 오류(환경 의존)

- 로컬에선 되는데 환경에 따라 예외가 발생해 재현이 어려움

- Tika는 의존 모듈/런타임 영향이 커서 포맷별 안정성이 흔들릴 수 있음.

- 범용 도구 하나로 통합하기보다 포맷별로 책임을 분리하는 설계를 배웠다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

환경별 예외/동작 불일치, 재현 어려움

- ## 원인(핵심)

Tika의 내부 의존성과 런타임 영향 + 포맷별 지원 범위 차이

- ## 해결(핵심 조치)

Tika 의존 축소

PDFBox/POI 등 포맷별 검증 라이브러리로 분리

업로드/처리 범위 단순화

- ## 검증/결과

환경 차이에 따른 오류 빈도 감소

- ## 조치(재발 방지)

지원 포맷/기능 범위 명시 + 환경별 체크리스트 운영

기능 제한

</details>
<br>
<br>



7. HWP 문서 지원 제약

- HWP는 라이브러리 지원이 약해 구현 리스크가 큼.

- 무리한 범용화는 일정/품질을 흔들 수 있어 지원 범위를 명확히 잡음.

- 기술 한계가 있을 때 ‘지원 범위 정의’로 품질을 지키는 방법을 배웠다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

HWP 처리/변환 기능 확장이 어려움

- ## 원인(핵심)

생태계 지원 부족 + Java에서 범용 처리 제약

- ## 해결(핵심 조치)

HWPLib 등으로 처리 범위 확정

요구사항 조정(예: 업로드 미사용 등)으로 안정성 확보

- ## 검증/결과

지원 범위 내 기능은 안정적으로 동작

- ## 조치(재발 방지)

가능/불가 케이스 문서화 + 예외 안내 메시지 표준화

</details>
<br>
<br>



8. Firebase 소셜 로그인: 클라이언트 인증 vs 서버 세션 불일치

- 프론트는 로그인처럼 보이는데 서버는 비로그인으로 판단하는 문제.

- Firebase Auth는 클라이언트 기준이라 서버 세션과 연결되지 않으면 동기화가 깨짐.

- 토큰 검증 → 서버 세션화까지가 소셜 로그인 완성이라는 걸 배웠다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

서버 API가 비로그인으로 판단, 계정 처리/가입 로직 꼬임

- ## 원인(핵심)

클라이언트(Firebase Auth) 상태와 서버 인증(세션) 체계 분리

- ## 해결(핵심 조치)

프론트에서 idToken 전달

서버(Firebase Admin)에서 토큰 검증

회원 조회/가입 처리 후 세션에 로그인 상태 저장

- ## 검증/결과

프론트/서버 로그인 상태가 일관되게 동작

- ## 조치(재발 방지)

만료/검증 실패 케이스 표준 처리 + 계정 중복 정책 정리

</details>
<br>
<br>



9. Git 업로드 시 API 키/민감정보 유출 리스크

- 레포 업로드 과정에서 API 키가 실수로 커밋될 위험이 있음.

- 로컬 개발 편의로 설정/하드코딩이 섞여 있었던 게 문제.

- 시크릿은 코드에서 분리하고 관리 규칙을 갖추는 습관이 생겼다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

설정 파일에 키가 포함된 채 커밋될 가능성

- ## 원인(핵심)

키 하드코딩/설정 파일 그대로 커밋

- ## 해결(핵심 조치)

환경변수/.env로 분리 + .gitignore 적용

노출 시 키 폐기/재발급(필요 시 히스토리 정리)

- ## 검증/결과

레포에 민감정보가 포함되지 않도록 구조 개선

- ## 조치(재발 방지)

커밋 전 시크릿 점검(프리커밋/CI) 룰 도입

</details>
<br>
<br>



10. 파일 다운로드(Blob/헤더) 문제로 실패/손상/파일명 깨짐

- 다운로드가 브라우저마다 실패하거나 파일이 손상되고 한글 파일명이 깨지는 문제가 있음.

- 서버 헤더(Content-Disposition)와 프론트 Blob 처리(responseType)가 맞지 않아 발생.

- HTTP 헤더/바이너리 처리까지 이해해야 안정적인 기능이 된다는 걸 배웠다.

<details> <summary><b> 더보기</b></summary>

- ## 증상

다운로드 실패/파일 손상/한글 파일명 깨짐(환경별)

- ## 원인(핵심)

프론트가 바이너리 응답을 JSON처럼 처리하거나 Blob 변환 누락

서버 Content-Disposition, Content-Type, 파일명 인코딩 처리 미흡

- ## 해결(핵심 조치)

서버: Content-Disposition: attachment + UTF-8 파일명 처리로 헤더 표준화

프론트: responseType: "blob" 적용 → URL.createObjectURL(blob) → <a download>로 저장

- ## 검증/결과

Chrome/Edge에서 정상 다운로드 및 한글 파일명 유지 확인

- ## 조치(재발 방지)

브라우저/대용량/한글 파일명 체크리스트화 + 다운로드 스펙 문서화

</details>
<br>
<br>


# 계기
- 최초 업무 종료 후 업무일지 작성이라는 추가적인 업무가 부여되 일찍 집에 가지 못하는 상황이 많아 그것을 조금이라도 빠르게 해결하고자 만들자고 계획

# WorkLog (업무일지 · 요약 · 문서(DOCX 템플릿) 산출 자동화)
- **기간:** 2025.11.22 ~ 2025.12.17  
업무 기록을 **일/주/월 단위로 작성**하고, **요약 및 템플릿 기반 DOCX 문서로 자동 산출**하는 웹 서비스입니다.  
“운영 가능한 시스템”을 목표로 **요구사항 → DB/API → 예외/로그 → 산출물** 흐름을 끝까지 구현했습니다.

> 구성: `WorkLog_project_Spring(Backend)` + `WorkLog_project_React(Frontend)`

---

## 핵심 기능
- **업무일지 작성/조회**: 일간/주간/월간 기록 관리
- **요약 자동화**: 주간/월간 요약(프로젝트 문맥 기반 정리)
- **DOCX 템플릿 산출**: 템플릿 선택 → 플레이스홀더 치환 → 문서 다운로드
- **인수인계 문서 생성**: 이슈/성과를 정리해 인수인계 문서 형태로 출력
- **운영 관점 품질 관리**: 예외 분리, 로그 기반 재현/원인 추적 흐름 적용

---

## 기술 스택
### Backend (Spring Boot)
- Java / Spring Boot (REST API)
- MyBatis (Mapper/SQL 분리)
- MySQL
- 문서 처리: DOCX 템플릿 치환(최종 산출은 DOCX 중심)
- 예외/검증/로그: Validation, ExceptionHandler, 운영 로그 기준 정리
- 요약 기능: Spring AI(OpenAI) 연동 구조

### Frontend (React)
- React + Vite
- Axios API 연동 / 상태 관리
- UI 구성(리스트/상세/필터/페이지네이션 흐름)

### Tools
- Git/GitHub (브랜치 전략, PR 기반 협업)
- Notion(작업 로그/의사결정/재현 절차 기록)

---

## 아키텍처 (요약)
- FE(React) → BE(Spring) → DB(MySQL)
- 문서 산출: 사용자 입력/조회 → 템플릿 선택 → 서버에서 치환/생성 → 다운로드
- 운영 대응: 재현 가능한 로그/예외 분리로 장애 원인 추적

---

## 폴더 구조
```bash
WorkLog_project
├─ WorkLog_project_React
└─ WorkLog_project_Spring
```

## 실행 방법 (로컬)

아래는 “일반적인 구성” 기준입니다. 레포 설정에 맞게 값만 채우면 됩니다.

1) DB(MySQL) 준비

## DB 생성 후 계정/권한 설정

application.yml(properties)에 DB 접속 정보 입력

2) Backend 실행
cd WorkLog_project_Spring
Maven
mvn spring-boot:run

3) Frontend 실행
cd WorkLog_project_React
npm install
npm run dev

## 내가 한일

요구사항 정리 → DB 설계/ERD → REST API → UI 연동 → 예외/로그 → DOCX 산출까지 엔드투엔드 구현

템플릿 산출/요약 기능에서 “동작”이 아니라 운영 안정성(예외 분리, 재현 가능한 로그) 기준으로 개선


## 발표 자료
- [PPT 다운로드](https://docs.google.com/presentation/d/1XuoEwugzBxHUy2-d6O0ZkvLRTWGguqHm/edit?usp=drive_link&ouid=112309789916009126624&rtpof=true&sd=true)
- 발표 자료 안에는 트러블 슈팅 관련 내용 포함
  
## 미리보기
<img width="1919" height="1079" alt="image" src="https://github.com/user-attachments/assets/2e4caa3d-8cbe-4322-8460-88471340a8a5" />
<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/c9863cd7-b685-4370-981f-e7d9030c4a15" />

## 개인 프로젝트(노션 정리)
- [노션 방문하기](https://www.notion.so/2ecc2c49a250802ca80bd418e5d148fe?source=copy_link)

